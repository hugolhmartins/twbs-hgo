/**
 * @license
 * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.IncrementalDOM={})}(this,function(t){"use strict";function e(){}function n(t,e){this.attrs=o(),this.attrsArr=[],this.newAttrs=o(),this.staticsApplied=!1,this.key=e,this.keyMap=o(),this.keyMapValid=!0,this.focused=!1,this.nodeName=t,this.text=null}function r(){this.created=p.nodesCreated&&[],this.deleted=p.nodesDeleted&&[]}var i=Object.prototype.hasOwnProperty;e.prototype=Object.create(null);var a=function(t,e){return i.call(t,e)},o=function(){return new e},u=function(t,e,r){var i=new n(e,r);return t.__incrementalDOMData=i,i},l=function(t){return f(t),t.__incrementalDOMData},f=function(t){if(!t.__incrementalDOMData){var e=t instanceof Element,n=e?t.localName:t.nodeName,r=e?t.getAttribute("key"):null,i=u(t,n,r);if(r&&(l(t.parentNode).keyMap[r]=t),e)for(var a=t.attributes,o=i.attrs,c=i.newAttrs,s=i.attrsArr,d=0;d<a.length;d+=1){var p=a[d],h=p.name,v=p.value;o[h]=v,c[h]=void 0,s.push(h),s.push(v)}for(var m=t.firstChild;m;m=m.nextSibling)f(m)}},c=function(t,e){return"svg"===t?"http://www.w3.org/2000/svg":"foreignObject"===l(e).nodeName?null:e.namespaceURI},s=function(t,e,n,r){var i=c(n,e),a=void 0;return a=i?t.createElementNS(i,n):t.createElement(n),u(a,n,r),a},d=function(t){var e=t.createTextNode("");return u(e,"#text",null),e},p={nodesCreated:null,nodesDeleted:null};r.prototype.markCreated=function(t){this.created&&this.created.push(t)},r.prototype.markDeleted=function(t){this.deleted&&this.deleted.push(t)},r.prototype.notifyChanges=function(){this.created&&this.created.length>0&&p.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&p.nodesDeleted(this.deleted)};var h=function(t){return t instanceof Document||t instanceof DocumentFragment},v=function(t,e){for(var n=[],r=t;r!==e;)n.push(r),r=r.parentNode;return n},m=function(t){for(var e=t,n=e;e;)n=e,e=e.parentNode;return n},y=function(t){var e=m(t);return h(e)?e.activeElement:null},g=function(t,e){var n=y(t);return n&&t.contains(n)?v(n,e):[]},k=function(t,e,n){for(var r=e.nextSibling,i=n;i!==e;){var a=i.nextSibling;t.insertBefore(i,r),i=a}},x=null,w=null,b=null,D=null,N=function(t,e){for(var n=0;n<t.length;n+=1)l(t[n]).focused=e},C=function(t){var e=function(e,n,i){var a=x,o=D,u=w,l=b;x=new r,D=e.ownerDocument,b=e.parentNode;var f=g(e,b);N(f,!0);var c=t(e,n,i);return N(f,!1),x.notifyChanges(),x=a,D=o,w=u,b=l,c};return e},O=C(function(t,e,n){return w=t,j(),e(n),P(),t}),A=C(function(t,e,n){var r={nextSibling:t};return w=r,e(n),t!==w&&t.parentNode&&_(b,t,l(b).keyMap),r===w?null:w}),M=function(t,e,n){var r=l(t);return e===r.nodeName&&n==r.key},S=function(t,e){if(!w||!M(w,t,e)){var n=l(b),r=w&&l(w),i=n.keyMap,a=void 0;if(e){var o=i[e];o&&(M(o,t,e)?a=o:o===w?x.markDeleted(o):_(b,o,i))}a||(a="#text"===t?d(D):s(D,b,t,e),e&&(i[e]=a),x.markCreated(a)),l(a).focused?k(b,a,w):r&&r.key&&!r.focused?(b.replaceChild(a,w),n.keyMapValid=!1):b.insertBefore(a,w),w=a}},_=function(t,e,n){t.removeChild(e),x.markDeleted(e);var r=l(e).key;r&&delete n[r]},E=function(){var t=b,e=l(t),n=e.keyMap,r=e.keyMapValid,i=t.lastChild,a=void 0;if(i!==w||!r){for(;i!==w;)_(t,i,n),i=t.lastChild;if(!r){for(a in n)i=n[a],i.parentNode!==t&&(x.markDeleted(i),delete n[a]);e.keyMapValid=!0}}},j=function(){b=w,w=null},I=function(){return w?w.nextSibling:b.firstChild},V=function(){w=I()},P=function(){E(),w=b,b=b.parentNode},T=function(t,e){return V(),S(t,e),j(),b},B=function(){return P(),w},F=function(){return V(),S("#text",null),w},L=function(){return b},R=function(){return I()},U=function(){w=b.lastChild},X=V,q={"default":"__default"},z=function(t){return 0===t.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===t.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},G=function(t,e,n){if(null==n)t.removeAttribute(e);else{var r=z(e);r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}},H=function(t,e,n){t[e]=n},J=function(t,e,n){e.indexOf("-")>=0?t.setProperty(e,n):t[e]=n},K=function(t,e,n){if("string"==typeof n)t.style.cssText=n;else{t.style.cssText="";var r=t.style,i=n;for(var o in i)a(i,o)&&J(r,o,i[o])}},Q=function(t,e,n){var r=typeof n;"object"===r||"function"===r?H(t,e,n):G(t,e,n)},W=function(t,e,n){var r=l(t),i=r.attrs;if(i[e]!==n){var a=Y[e]||Y[q["default"]];a(t,e,n),i[e]=n}},Y=o();Y[q["default"]]=Q,Y.style=K;var Z=3,$=[],tt=function(t,e,n){var r=T(t,e),i=l(r);if(!i.staticsApplied){if(n)for(var a=0;a<n.length;a+=2){var o=n[a],u=n[a+1];W(r,o,u)}i.staticsApplied=!0}for(var f=i.attrsArr,c=i.newAttrs,s=!f.length,d=Z,p=0;d<arguments.length;d+=2,p+=2){var h=arguments[d];if(s)f[p]=h,c[h]=void 0;else if(f[p]!==h)break;var u=arguments[d+1];(s||f[p+1]!==u)&&(f[p+1]=u,W(r,h,u))}if(d<arguments.length||p<f.length){for(;d<arguments.length;d+=1,p+=1)f[p]=arguments[d];for(p<f.length&&(f.length=p),d=0;d<f.length;d+=2){var o=f[d],u=f[d+1];c[o]=u}for(var v in c)W(r,v,c[v]),c[v]=void 0}return r},et=function(t,e,n){$[0]=t,$[1]=e,$[2]=n},nt=function(t,e){$.push(t),$.push(e)},rt=function(){var t=tt.apply(null,$);return $.length=0,t},it=function(){var t=B();return t},at=function(t){return tt.apply(null,arguments),it(t)},ot=function(t){var e=F(),n=l(e);if(n.text!==t){n.text=t;for(var r=t,i=1;i<arguments.length;i+=1){var a=arguments[i];r=a(r)}e.data=r}return e};t.patch=O,t.patchInner=O,t.patchOuter=A,t.currentElement=L,t.currentPointer=R,t.skip=U,t.skipNode=X,t.elementVoid=at,t.elementOpenStart=et,t.elementOpenEnd=rt,t.elementOpen=tt,t.elementClose=it,t.text=ot,t.attr=nt,t.symbols=q,t.attributes=Y,t.applyAttr=G,t.applyProp=H,t.notifications=p,t.importNode=f});

//# sourceMappingURL=incremental-dom-min.js.map